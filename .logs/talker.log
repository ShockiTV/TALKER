
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Player is reloading weapon
[info]: Player is reloading weapon
[info]: Player is reloading weapon
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[error]: No character id provided
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[error]: memory_store:get_new_memories: No character id provided
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 3
[debug]: Current memories: 3
[info]: # of memories fetched: 3
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 101
[debug]: Checking event
[debug]: Added new memory at time: 100
[debug]: Checking event
[debug]: Added new memory at time: 102
[debug]: Checking event
[debug]: Not adding memory at time: 0
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 3
[info]: Getting character name for ID: 3
[debug]: Checking witness: 3
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 0
[debug]: Current memories: 0
[info]: # of memories fetched: 0
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 0
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 0
[debug]: Current memories: 0
[info]: # of memories fetched: 0
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 0
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 0
[debug]: Current memories: 0
[info]: # of memories fetched: 0
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 0
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 0
[debug]: Current memories: 0
[info]: # of memories fetched: 0
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 0
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 0
[debug]: Sorted new memories: 0
[debug]: Current memories: 0
[info]: # of memories fetched: 0
[info]: Memory count below threshold; no compression needed
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 3
[debug]: Compressed memories: 0
[debug]: Getting new memories for character: 3
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 0
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: Player is reloading weapon
[info]: Reload event registered
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Checking event
[debug]: Added new memory at time: 10
[debug]: Checking event
[debug]: Added new memory at time: 9
[debug]: Checking event
[debug]: Added new memory at time: 8
[debug]: Checking event
[debug]: Added new memory at time: 7
[debug]: Checking event
[debug]: Not adding memory at time: 6
[debug]: Checking event
[debug]: Not adding memory at time: 5
[debug]: Checking event
[debug]: Not adding memory at time: 4
[debug]: Checking event
[debug]: Not adding memory at time: 3
[debug]: Checking event
[debug]: Not adding memory at time: 2
[debug]: Checking event
[debug]: Not adding memory at time: 1
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Only one witness in the last event; skipping speaker picking.
[http]: Sending request: { {
    content = "Hello",
    role = "user"
  } }
[http]: Received response: Mocked response content

[http]: Sending request: { {
    content = "Hello",
    role = "user"
  }, {
    content = "Hi there!",
    role = "assistant"
  } }
[http]: Received response: Mocked response content

[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 3
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 11
[debug]: Checking event
[debug]: Added new memory at time: 2500
[debug]: Checking event
[debug]: Not adding memory at time: 2000
[debug]: Checking event
[debug]: Not adding memory at time: 1001
[debug]: Checking event
[debug]: Not adding memory at time: 1600
[debug]: Checking event
[debug]: Added new memory at time: 3001
[debug]: Checking event
[debug]: Not adding memory at time: 1000
[debug]: Checking event
[debug]: Not adding memory at time: 1002
[debug]: Checking event
[debug]: Added new memory at time: 1601
[debug]: Checking event
[debug]: Added new memory at time: 2501
[debug]: Checking event
[debug]: Added new memory at time: 3002
[debug]: Checking event
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 6
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Saving event store...
[info]: Saving event store...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 101
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 102
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[info]: prompt_builder.create_pick_speaker_prompt with
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generatexd
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: AI_request.generate_dialogue
[info]: AI_request.generate_dialogue
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Unsorted event #1: {
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, {
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } }
}
[debug]: Unsorted event #2: {
  witnesses = { {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } }
}
[debug]: Sorting events by game_time_ms.
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Player is reloading weapon
[info]: Reload event registered
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: Dialogue generated
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generatedx'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generatexd'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[info]: Saving state...
[info]: Saving event store...
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Player is reloading weapon
[info]: Reload event registered
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker: 'Dialogue generated'
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and s**t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request

[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Final uncensored text: This fuck is censored
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and sh*t needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "independent stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "independent stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "independent stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "independent stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "independent stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No faction found with name: independent stalker
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Unsorted event #1: {
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, {
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } }
}
[debug]: Unsorted event #2: {
  witnesses = { {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    } }
}
[debug]: Sorting events by game_time_ms.
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[debug]: Only one witness, picking it as speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[warn]: No witnesses in the last event.
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.pick_speaker
[info]: AI_request.pick_speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[warn]: No witnesses in the last event.
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Unsorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Unsorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorting events by game_time_ms.
[debug]: Sorted event #1: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #2: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #3: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Sorted event #4: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Selecting the 5 most recent events if available.
[debug]: Adding event #1 to last_five_events: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #2 to last_five_events: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #3 to last_five_events: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Adding event #4 to last_five_events: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Last event: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Number of witnesses in last event: 6
[debug]: Inserting event #1 into user messages: {
  description = "%s lost the map",
  game_time_ms = 0,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { {
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #2 into user messages: {
  description = "%s insulted %s",
  game_time_ms = 100,
  involved_objects = { <1>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    }, <2>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    } },
  witnesses = { <table 2>, <table 1>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #3 into user messages: {
  description = "%s fought %s",
  game_time_ms = 200,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[debug]: Inserting event #4 into user messages: {
  description = "%s killed %s",
  game_time_ms = 300,
  involved_objects = { <1>{
      experience = "experienced",
      faction = "stalker",
      game_id = "1",
      name = "Anonsky",
      personality = "brave",
      weapon = "shotgun"
    }, <2>{
      experience = "very inexperienced",
      faction = "Freedom",
      game_id = "2",
      name = "Sarik",
      personality = "cautious",
      weapon = "pistol"
    } },
  witnesses = { <table 1>, <table 2>, {
      experience = "inexperienced",
      faction = "stalker",
      game_id = "3",
      name = "Danila Matador",
      personality = "reckless",
      weapon = "rifle"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "4",
      name = "Fanatic",
      personality = "zealous",
      weapon = "Ak-47"
    }, {
      experience = "very inexperienced",
      faction = "stalker",
      game_id = "5",
      name = "Egorka Orderly",
      personality = "nervous",
      weapon = "colt 1991"
    }, {
      experience = "experienced",
      faction = "stalker",
      game_id = "6",
      name = "Hip",
      personality = "calm",
      weapon = "knife"
    } },
  world_context = "Cordon"
}
[info]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[info]: Memory count below threshold; no compression needed
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: too far too speak "npc1" at distance 200 when max distance is 20 
[debug]: removing witness from speaker list: {
  game_id = "npc1"
}
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 3
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  }, {
    game_id = "npc2"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Finished building pick_speaker_prompt with 6 messages
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = {},
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: prompt_builder.create_pick_speaker_prompt with 2 events
[debug]: Sorting events by game_time_ms: { {
    game_time_ms = 1,
    involved_objects = {},
    witnesses = { <1>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, {
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      }, <2>{
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      } }
  }, {
    game_time_ms = 2,
    involved_objects = { <table 1> },
    witnesses = { <table 1>, <table 2> }
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Sorting events by game_time_ms: { {
    description = "%s lost the map",
    game_time_ms = 0,
    involved_objects = { <1>{
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      } },
    witnesses = <2>{ <3>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, <table 1>, {
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "4",
        name = "Fanatic",
        personality = "zealous",
        weapon = "Ak-47"
      }, {
        experience = "very inexperienced",
        faction = "stalker",
        game_id = "5",
        name = "Egorka Orderly",
        personality = "nervous",
        weapon = "colt 1991"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "6",
        name = "Hip",
        personality = "calm",
        weapon = "knife"
      } },
    world_context = "Cordon"
  }, {
    description = "%s insulted %s",
    game_time_ms = 100,
    involved_objects = { <table 1>, <table 3> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s fought %s",
    game_time_ms = 200,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s killed %s",
    game_time_ms = 300,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  } }
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: too far too speak "npc1" at distance 200 when max distance is 20 
[debug]: removing witness from speaker list: {
  game_id = "npc1"
}
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 3
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  }, {
    game_id = "npc2"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[warn]: No personality found after assignment: 0
[info]: Getting character name for ID: 1
[debug]: Checking witness: 0
[debug]: Checking witness: 2
[debug]: Checking witness: 3
[debug]: Checking witness: 4
[debug]: Checking witness: 5
[debug]: Checking witness: 6
[warn]: No personality found after assignment: 0
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "0",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[warn]: No personality found after assignment: 0
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[warn]: No personality found after assignment: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 0
[debug]: Checking witness: 2
[debug]: Checking witness: 3
[debug]: Checking witness: 4
[debug]: Checking witness: 5
[debug]: Checking witness: 6
[warn]: No personality found after assignment: 0
[warn]: AI picked invalid speaker:bla
[warn]: AI picked invalid speaker:1
[warn]: No personality found after assignment: 0
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "0",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No viable speaker found close enough to player
[debug]: Compressing memories after picking speaker
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No viable speaker found close enough to player
[debug]: Compressing memories after picking speaker
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Sorting events by game_time_ms: { {
    description = "%s lost the map",
    game_time_ms = 0,
    involved_objects = { <1>{
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      } },
    witnesses = <2>{ <3>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, <table 1>, {
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "4",
        name = "Fanatic",
        personality = "zealous",
        weapon = "Ak-47"
      }, {
        experience = "very inexperienced",
        faction = "stalker",
        game_id = "5",
        name = "Egorka Orderly",
        personality = "nervous",
        weapon = "colt 1991"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "6",
        name = "Hip",
        personality = "calm",
        weapon = "knife"
      } },
    world_context = "Cordon"
  }, {
    description = "%s insulted %s",
    game_time_ms = 100,
    involved_objects = { <table 1>, <table 3> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s fought %s",
    game_time_ms = 200,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s killed %s",
    game_time_ms = 300,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  } }
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No viable speaker found close enough to player
[debug]: Compressing memories after picking speaker
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: too far too speak "npc1" at distance 200 when max distance is 20 
[debug]: removing witness from speaker list: {
  game_id = "npc1"
}
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 3
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  }, {
    game_id = "npc2"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: Getting all memories for character: char_1
[debug]: Compressed memories: 2
[debug]: Getting new memories for character: char_1
[debug]: Last compressed memory time: 1600
[debug]: Total events: 4
[debug]: Added new memory at time: 2500
[debug]: Added new memory at time: 3000
[debug]: Total new memories: 2
[debug]: New memories: 2
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 3
[debug]: Inserting last compressed memory
[debug]: Current memories: 4
[info]: # of memories fetched: 4
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 4
[debug]: Added new memory at time: 300
[debug]: Added new memory at time: 100
[debug]: Added new memory at time: 200
[debug]: Total new memories: 3
[debug]: New memories: 3
[debug]: All memories: 4
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Received dialogue: Speaker: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: Final uncensored text: This fuck is censored
[info]: Final uncensored text: This fuck and shit needs uncensoring
[info]: FUN POLICE DETECTED: Sorry, I can't help with that request
[info]: prompt_builder.create_pick_speaker_prompt with 4 events
[debug]: Sorting events by game_time_ms: { {
    description = "%s lost the map",
    game_time_ms = 0,
    involved_objects = { <1>{
        experience = "very inexperienced",
        faction = "Freedom",
        game_id = "2",
        name = "Sarik",
        personality = "cautious",
        weapon = "pistol"
      } },
    witnesses = <2>{ <3>{
        experience = "experienced",
        faction = "stalker",
        game_id = "1",
        name = "Anonsky",
        personality = "brave",
        weapon = "shotgun"
      }, <table 1>, {
        experience = "inexperienced",
        faction = "stalker",
        game_id = "3",
        name = "Danila Matador",
        personality = "reckless",
        weapon = "rifle"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "4",
        name = "Fanatic",
        personality = "zealous",
        weapon = "Ak-47"
      }, {
        experience = "very inexperienced",
        faction = "stalker",
        game_id = "5",
        name = "Egorka Orderly",
        personality = "nervous",
        weapon = "colt 1991"
      }, {
        experience = "experienced",
        faction = "stalker",
        game_id = "6",
        name = "Hip",
        personality = "calm",
        weapon = "knife"
      } },
    world_context = "Cordon"
  }, {
    description = "%s insulted %s",
    game_time_ms = 100,
    involved_objects = { <table 1>, <table 3> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s fought %s",
    game_time_ms = 200,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  }, {
    description = "%s killed %s",
    game_time_ms = 300,
    involved_objects = { <table 3>, <table 1> },
    witnesses = <table 2>,
    world_context = "Cordon"
  } }
[debug]: Finished building pick_speaker_prompt with 6 messages
[info]: Creating prompt for speaker: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[info]: Creating transcription prompt
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: AI picked invalid speaker:model utility response
[warn]: AI did not pick a valid speaker: model utility response
[info]: AI_request.compress_memories
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: Compressed memories: 1
[debug]: Sorted new memories: 0
[debug]: Inserting last compressed memory
[debug]: Current memories: 1
[info]: # of memories fetched: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[info]: AI_request.request_dialogue
[debug]: Getting all memories for character: 1
[debug]: Compressed memories: 1
[debug]: Getting new memories for character: 1
[debug]: Last compressed memory time: 50
[debug]: Total events: 0
[debug]: Total new memories: 0
[debug]: New memories: 0
[debug]: All memories: 1
[info]: Getting character name for ID: 1
[debug]: Checking witness: 1
[info]: Received dialogue: Speaker lastname: 'Dialogue generated'
[warn]: AI picked invalid speaker:bla
[info]: AI_request.generate_dialogue
[info]: AI_request.pick_speaker
[info]: wintesses 2
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  } }
[debug]: removing witness from speaker list: {
  experience = "experienced",
  faction = "stalker",
  game_id = "1",
  name = "Anonsky",
  personality = "brave",
  weapon = "shotgun"
}
[warn]: No viable speaker found close enough to player
[debug]: Compressing memories after picking speaker
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: too far too speak "npc1" at distance 200 when max distance is 20 
[debug]: removing witness from speaker list: {
  game_id = "npc1"
}
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 2
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: wintesses 3
[debug]: witnesses { {
    game_id = "player"
  }, {
    game_id = "npc1"
  }, {
    game_id = "npc2"
  } }
[debug]: removing witness from speaker list: {
  game_id = "player"
}
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Saving state...
[info]: Saving event store...
[debug]: Returning character personalities for save.
[info]: Loading state...
[info]: Loading event store...
[info]: Events size is now: 0
[debug]: Loading saved character personalities.
[debug]: Player is reloading weapon
[debug]: Ignoring reload event
[debug]: Getting new memories for character: 2
[debug]: Last compressed memory time: 6
[debug]: Total events: 10
[debug]: Added new memory at time: 10
[debug]: Added new memory at time: 9
[debug]: Added new memory at time: 8
[debug]: Added new memory at time: 7
[debug]: Total new memories: 4
[debug]: New memories: 4
[debug]: Compressed memories: 2
[debug]: Sorted new memories: 4
[debug]: Inserting last compressed memory
[debug]: Current memories: 5
[info]: AI_request.pick_speaker
[info]: wintesses 6
[debug]: witnesses { {
    experience = "experienced",
    faction = "stalker",
    game_id = "1",
    name = "Anonsky",
    personality = "brave",
    weapon = "shotgun"
  }, {
    experience = "very inexperienced",
    faction = "Freedom",
    game_id = "2",
    name = "Sarik",
    personality = "cautious",
    weapon = "pistol"
  }, {
    experience = "inexperienced",
    faction = "stalker",
    game_id = "3",
    name = "Danila Matador",
    personality = "reckless",
    weapon = "rifle"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "4",
    name = "Fanatic",
    personality = "zealous",
    weapon = "Ak-47"
  }, {
    experience = "very inexperienced",
    faction = "stalker",
    game_id = "5",
    name = "Egorka Orderly",
    personality = "nervous",
    weapon = "colt 1991"
  }, {
    experience = "experienced",
    faction = "stalker",
    game_id = "6",
    name = "Hip",
    personality = "calm",
    weapon = "knife"
  } }
